<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Collision Avoidance: algoritmo_prevenzione_collisioni.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Collision Avoidance<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Dynamic collision avoidance using PRM &amp; RRT</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">algoritmo_prevenzione_collisioni.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>The algoirthm moves the robot from a starting position to a goal position, the trajectory executed during the motion is constantly modified in order to avoid collision with the changing environment.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;moveit/move_group_interface/move_group_interface.h&gt;</code><br />
<code>#include &quot;ros/ros.h&quot;</code><br />
<code>#include &lt;cstdlib&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;tf2_geometry_msgs/tf2_geometry_msgs.h&gt;</code><br />
<code>#include &lt;tf2/LinearMath/Quaternion.h&gt;</code><br />
<code>#include &lt;tf/transform_listener.h&gt;</code><br />
<code>#include &lt;std_msgs/String.h&gt;</code><br />
<code>#include &lt;std_srvs/Trigger.h&gt;</code><br />
<code>#include &lt;pluginlib/class_loader.h&gt;</code><br />
<code>#include &quot;gazebo_msgs/ModelState.h&quot;</code><br />
<code>#include &lt;gazebo_msgs/SetModelState.h&gt;</code><br />
<code>#include &lt;moveit/robot_state/conversions.h&gt;</code><br />
<code>#include &lt;moveit/planning_pipeline/planning_pipeline.h&gt;</code><br />
<code>#include &lt;moveit_msgs/PlanningScene.h&gt;</code><br />
<code>#include &lt;moveit/robot_model/robot_model.h&gt;</code><br />
<code>#include &lt;moveit/robot_state/robot_state.h&gt;</code><br />
<code>#include &lt;moveit/robot_model_loader/robot_model_loader.h&gt;</code><br />
<code>#include &lt;moveit/planning_scene/planning_scene.h&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;moveit/planning_scene_interface/planning_scene_interface.h&gt;</code><br />
<code>#include &lt;moveit/planning_scene_monitor/planning_scene_monitor.h&gt;</code><br />
<code>#include &lt;moveit/planning_interface/planning_interface.h&gt;</code><br />
<code>#include &lt;moveit/trajectory_processing/iterative_time_parameterization.h&gt;</code><br />
<code>#include &lt;moveit_msgs/DisplayRobotState.h&gt;</code><br />
<code>#include &lt;moveit_msgs/DisplayTrajectory.h&gt;</code><br />
<code>#include &lt;moveit_msgs/AttachedCollisionObject.h&gt;</code><br />
<code>#include &lt;moveit_msgs/CollisionObject.h&gt;</code><br />
<code>#include &lt;moveit/kinematic_constraints/utils.h&gt;</code><br />
<code>#include &lt;moveit_visual_tools/moveit_visual_tools.h&gt;</code><br />
<code>#include &lt;rviz_visual_tools/rviz_visual_tools.h&gt;</code><br />
<code>#include &quot;geometric_shapes/shapes.h&quot;</code><br />
<code>#include &quot;geometric_shapes/mesh_operations.h&quot;</code><br />
<code>#include &quot;geometric_shapes/shape_operations.h&quot;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for algoritmo_prevenzione_collisioni.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="algoritmo__prevenzione__collisioni_8cpp__incl.png" border="0" usemap="#aalgoritmo__prevenzione__collisioni_8cpp" alt=""/></div>
<map name="aalgoritmo__prevenzione__collisioni_8cpp" id="aalgoritmo__prevenzione__collisioni_8cpp">
<area shape="rect" title="The algoirthm moves the robot from a starting position to a goal position, the trajectory executed du..." alt="" coords="3214,5,3386,45"/>
<area shape="rect" title=" " alt="" coords="5,108,85,133"/>
<area shape="rect" title=" " alt="" coords="109,101,328,141"/>
<area shape="rect" title=" " alt="" coords="353,108,431,133"/>
<area shape="rect" title=" " alt="" coords="455,108,521,133"/>
<area shape="rect" title=" " alt="" coords="545,108,604,133"/>
<area shape="rect" title=" " alt="" coords="629,101,803,141"/>
<area shape="rect" title=" " alt="" coords="828,108,1033,133"/>
<area shape="rect" title=" " alt="" coords="1057,108,1225,133"/>
<area shape="rect" title=" " alt="" coords="1249,108,1388,133"/>
<area shape="rect" title=" " alt="" coords="1413,108,1550,133"/>
<area shape="rect" title=" " alt="" coords="1574,108,1749,133"/>
<area shape="rect" title=" " alt="" coords="1773,108,1974,133"/>
<area shape="rect" title=" " alt="" coords="1998,108,2221,133"/>
<area shape="rect" title=" " alt="" coords="2245,101,2392,141"/>
<area shape="rect" title=" " alt="" coords="2416,101,2603,141"/>
<area shape="rect" title=" " alt="" coords="2627,108,2848,133"/>
<area shape="rect" title=" " alt="" coords="2872,101,3027,141"/>
<area shape="rect" title=" " alt="" coords="3051,101,3197,141"/>
<area shape="rect" title=" " alt="" coords="3222,93,3378,148"/>
<area shape="rect" title=" " alt="" coords="3403,101,3576,141"/>
<area shape="rect" title=" " alt="" coords="3600,108,3677,133"/>
<area shape="rect" title=" " alt="" coords="3701,93,3893,148"/>
<area shape="rect" title=" " alt="" coords="3918,93,4103,148"/>
<area shape="rect" title=" " alt="" coords="4127,101,4321,141"/>
<area shape="rect" title=" " alt="" coords="4345,101,4594,141"/>
<area shape="rect" title=" " alt="" coords="4618,101,4819,141"/>
<area shape="rect" title=" " alt="" coords="4843,108,5082,133"/>
<area shape="rect" title=" " alt="" coords="5106,101,5334,141"/>
<area shape="rect" title=" " alt="" coords="5359,108,5583,133"/>
<area shape="rect" title=" " alt="" coords="5607,101,5823,141"/>
<area shape="rect" title=" " alt="" coords="5847,101,6017,141"/>
<area shape="rect" title=" " alt="" coords="6041,101,6199,141"/>
<area shape="rect" title=" " alt="" coords="6224,108,6427,133"/>
<area shape="rect" title=" " alt="" coords="6451,101,6632,141"/>
<area shape="rect" title=" " alt="" coords="6656,101,6840,141"/>
<area shape="rect" title=" " alt="" coords="6864,108,6939,133"/>
<area shape="rect" title=" " alt="" coords="6963,108,7029,133"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa22275fc0348281127e4554cf54b20f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#aa22275fc0348281127e4554cf54b20f8">publish</a> (ros::NodeHandle n, std::string topic, int num)</td></tr>
<tr class="memdesc:aa22275fc0348281127e4554cf54b20f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to publish messages to the specified topic.  <a href="algoritmo__prevenzione__collisioni_8cpp.html#aa22275fc0348281127e4554cf54b20f8">More...</a><br /></td></tr>
<tr class="separator:aa22275fc0348281127e4554cf54b20f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8197c84abd3032cb00669567be02a797"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#a8197c84abd3032cb00669567be02a797">print_links_value</a> (const moveit::core::JointModelGroup *joint_model_group, moveit::core::RobotState &amp;robot_state)</td></tr>
<tr class="memdesc:a8197c84abd3032cb00669567be02a797"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to print the name of the joints with the corrisponing angles.  <a href="algoritmo__prevenzione__collisioni_8cpp.html#a8197c84abd3032cb00669567be02a797">More...</a><br /></td></tr>
<tr class="separator:a8197c84abd3032cb00669567be02a797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15cfff432549faded61ccad4dbe8d7b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#a15cfff432549faded61ccad4dbe8d7b6">intantiate_classes</a> ()</td></tr>
<tr class="memdesc:a15cfff432549faded61ccad4dbe8d7b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to instantiate all the classes.  <a href="algoritmo__prevenzione__collisioni_8cpp.html#a15cfff432549faded61ccad4dbe8d7b6">More...</a><br /></td></tr>
<tr class="separator:a15cfff432549faded61ccad4dbe8d7b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f54a87624d6c731d917fd489ce9c21a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#a7f54a87624d6c731d917fd489ce9c21a">move_to_start</a> (ros::NodeHandle &amp;node_handle)</td></tr>
<tr class="memdesc:a7f54a87624d6c731d917fd489ce9c21a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to move the robot to the starting position.  <a href="algoritmo__prevenzione__collisioni_8cpp.html#a7f54a87624d6c731d917fd489ce9c21a">More...</a><br /></td></tr>
<tr class="separator:a7f54a87624d6c731d917fd489ce9c21a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a514ffc33d25019bd6ab8433554633074"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#a514ffc33d25019bd6ab8433554633074">select_num_configurations</a> (int waypoint_num)</td></tr>
<tr class="memdesc:a514ffc33d25019bd6ab8433554633074"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to select the number of configuration.  <a href="algoritmo__prevenzione__collisioni_8cpp.html#a514ffc33d25019bd6ab8433554633074">More...</a><br /></td></tr>
<tr class="separator:a514ffc33d25019bd6ab8433554633074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4a0cddd9a43919327242d28de187fee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#aa4a0cddd9a43919327242d28de187fee">plan_and_move</a> (ros::NodeHandle &amp;node_handle, std::vector&lt; double &gt; &amp;pos, bool test)</td></tr>
<tr class="memdesc:aa4a0cddd9a43919327242d28de187fee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for dynamic collision avoidance.  <a href="algoritmo__prevenzione__collisioni_8cpp.html#aa4a0cddd9a43919327242d28de187fee">More...</a><br /></td></tr>
<tr class="separator:aa4a0cddd9a43919327242d28de187fee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a29781a20c5dd4153c3c1cecf0ff328"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#a7a29781a20c5dd4153c3c1cecf0ff328">main</a> (int argc, char **args)</td></tr>
<tr class="memdesc:a7a29781a20c5dd4153c3c1cecf0ff328"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main Function.  <a href="algoritmo__prevenzione__collisioni_8cpp.html#a7a29781a20c5dd4153c3c1cecf0ff328">More...</a><br /></td></tr>
<tr class="separator:a7a29781a20c5dd4153c3c1cecf0ff328"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad7bfa43cafe8e167ff7968fab8a6d0fa"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#ad7bfa43cafe8e167ff7968fab8a6d0fa">home_pos_x</a> = 0.5</td></tr>
<tr class="separator:ad7bfa43cafe8e167ff7968fab8a6d0fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f40f8f0cb25be2f889754a10d82ecd1"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#a1f40f8f0cb25be2f889754a10d82ecd1">home_pos_y</a> = 0.3</td></tr>
<tr class="separator:a1f40f8f0cb25be2f889754a10d82ecd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa87a83660e85a5e380010d72d4de6aeb"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#aa87a83660e85a5e380010d72d4de6aeb">home_pos_z</a> = 0.87</td></tr>
<tr class="separator:aa87a83660e85a5e380010d72d4de6aeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf4ee9401c5cf1f6b40d969c983302a6"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#abf4ee9401c5cf1f6b40d969c983302a6">orientation_w</a> = 0.0001</td></tr>
<tr class="separator:abf4ee9401c5cf1f6b40d969c983302a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab73db7442fe816acb7163afbffacd796"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#ab73db7442fe816acb7163afbffacd796">orientation_x</a> = 0.0</td></tr>
<tr class="separator:ab73db7442fe816acb7163afbffacd796"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d4604a1b64e201f5617d13e90867339"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#a9d4604a1b64e201f5617d13e90867339">orientation_y</a> = 0.0</td></tr>
<tr class="separator:a9d4604a1b64e201f5617d13e90867339"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abad9428aad916c4adb7a5c9dcd0dffc9"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#abad9428aad916c4adb7a5c9dcd0dffc9">orientation_z</a> = -1</td></tr>
<tr class="separator:abad9428aad916c4adb7a5c9dcd0dffc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af30bdcf895e64063b3d6c1bac1141ad7"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#af30bdcf895e64063b3d6c1bac1141ad7">start_planning_time</a> = 0.15</td></tr>
<tr class="separator:af30bdcf895e64063b3d6c1bac1141ad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaba0b4d344c0f4f1ff9fa2b5ca75e116"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#aaba0b4d344c0f4f1ff9fa2b5ca75e116">robot_accellerations</a> = 0.18</td></tr>
<tr class="separator:aaba0b4d344c0f4f1ff9fa2b5ca75e116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a628d801d093e5d9b41ecaa82592ee92d"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#a628d801d093e5d9b41ecaa82592ee92d">tolerance</a> = 0.05</td></tr>
<tr class="memdesc:a628d801d093e5d9b41ecaa82592ee92d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Goal pose tolerance.  <a href="algoritmo__prevenzione__collisioni_8cpp.html#a628d801d093e5d9b41ecaa82592ee92d">More...</a><br /></td></tr>
<tr class="separator:a628d801d093e5d9b41ecaa82592ee92d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5c64be1d905b455d8330243e5c1804c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#aa5c64be1d905b455d8330243e5c1804c">test_num</a></td></tr>
<tr class="separator:aa5c64be1d905b455d8330243e5c1804c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19cf8ea4075bbdc47c4caef4587cf045"><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#a19cf8ea4075bbdc47c4caef4587cf045">PLANNING_GROUP_ARM</a> = &quot;manipulator&quot;</td></tr>
<tr class="memdesc:a19cf8ea4075bbdc47c4caef4587cf045"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define moveit group name [Arm].  <a href="algoritmo__prevenzione__collisioni_8cpp.html#a19cf8ea4075bbdc47c4caef4587cf045">More...</a><br /></td></tr>
<tr class="separator:a19cf8ea4075bbdc47c4caef4587cf045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40ed76b84f7fb79a07b725b43e0c73f2"><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#a40ed76b84f7fb79a07b725b43e0c73f2">PLANNING_GROUP_GRIPPER</a> = &quot;endeffector&quot;</td></tr>
<tr class="memdesc:a40ed76b84f7fb79a07b725b43e0c73f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define moveit group name [End-Effector].  <a href="algoritmo__prevenzione__collisioni_8cpp.html#a40ed76b84f7fb79a07b725b43e0c73f2">More...</a><br /></td></tr>
<tr class="separator:a40ed76b84f7fb79a07b725b43e0c73f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadb4a5092d2de5ea3a01d642559c512a"><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#aadb4a5092d2de5ea3a01d642559c512a">PLANNER</a> = &quot;RRTstar&quot;</td></tr>
<tr class="memdesc:aadb4a5092d2de5ea3a01d642559c512a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of the planner that will be used.  <a href="algoritmo__prevenzione__collisioni_8cpp.html#aadb4a5092d2de5ea3a01d642559c512a">More...</a><br /></td></tr>
<tr class="separator:aadb4a5092d2de5ea3a01d642559c512a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9235c4a0ace90c9f9330a17e62ae128c"><td class="memItemLeft" align="right" valign="top">moveit::planning_interface::MoveGroupInterface *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#a9235c4a0ace90c9f9330a17e62ae128c">arm_move_group</a></td></tr>
<tr class="memdesc:a9235c4a0ace90c9f9330a17e62ae128c"><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to the arm move group  <a href="algoritmo__prevenzione__collisioni_8cpp.html#a9235c4a0ace90c9f9330a17e62ae128c">More...</a><br /></td></tr>
<tr class="separator:a9235c4a0ace90c9f9330a17e62ae128c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3be7f66194c2acdc26a14c6210b5ba05"><td class="memItemLeft" align="right" valign="top">moveit::planning_interface::MoveGroupInterface *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#a3be7f66194c2acdc26a14c6210b5ba05">gripper_move_group</a></td></tr>
<tr class="memdesc:a3be7f66194c2acdc26a14c6210b5ba05"><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to the gripper move group  <a href="algoritmo__prevenzione__collisioni_8cpp.html#a3be7f66194c2acdc26a14c6210b5ba05">More...</a><br /></td></tr>
<tr class="separator:a3be7f66194c2acdc26a14c6210b5ba05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1498683c0741dd54290a067e3855d16"><td class="memItemLeft" align="right" valign="top">planning_scene_monitor::PlanningSceneMonitorPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#ae1498683c0741dd54290a067e3855d16">psm</a></td></tr>
<tr class="memdesc:ae1498683c0741dd54290a067e3855d16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Planning Scene monitor that will create the planning scene.  <a href="algoritmo__prevenzione__collisioni_8cpp.html#ae1498683c0741dd54290a067e3855d16">More...</a><br /></td></tr>
<tr class="separator:ae1498683c0741dd54290a067e3855d16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a17daac43a74229694494db6c7cae83"><td class="memItemLeft" align="right" valign="top">robot_model_loader::RobotModelLoader *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algoritmo__prevenzione__collisioni_8cpp.html#a4a17daac43a74229694494db6c7cae83">robot_model_load</a></td></tr>
<tr class="memdesc:a4a17daac43a74229694494db6c7cae83"><td class="mdescLeft">&#160;</td><td class="mdescRight">RobotModelLoader: <a href="http://docs.ros.org/noetic/api/moveit_ros_planning/html/classrobot__model__loader_1_1RobotModelLoader.html">http://docs.ros.org/noetic/api/moveit_ros_planning/html/classrobot__model__loader_1_1RobotModelLoader.html</a>.  <a href="algoritmo__prevenzione__collisioni_8cpp.html#a4a17daac43a74229694494db6c7cae83">More...</a><br /></td></tr>
<tr class="separator:a4a17daac43a74229694494db6c7cae83"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >The algoirthm moves the robot from a starting position to a goal position, the trajectory executed during the motion is constantly modified in order to avoid collision with the changing environment. </p>
<dl class="section author"><dt>Author</dt><dd>Bonafini Marco </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2022 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a15cfff432549faded61ccad4dbe8d7b6" name="a15cfff432549faded61ccad4dbe8d7b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15cfff432549faded61ccad4dbe8d7b6">&#9670;&#160;</a></span>intantiate_classes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void intantiate_classes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to instantiate all the classes. </p>
<p >The move group for the arm, the Robot Model Loader and the Planning Scene Monitor </p>

</div>
</div>
<a id="a7a29781a20c5dd4153c3c1cecf0ff328" name="a7a29781a20c5dd4153c3c1cecf0ff328"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a29781a20c5dd4153c3c1cecf0ff328">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main Function. </p>
<p >It initializes the ROS node and asks the user for the test to execute </p>

</div>
</div>
<a id="a7f54a87624d6c731d917fd489ce9c21a" name="a7f54a87624d6c731d917fd489ce9c21a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f54a87624d6c731d917fd489ce9c21a">&#9670;&#160;</a></span>move_to_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void move_to_start </td>
          <td>(</td>
          <td class="paramtype">ros::NodeHandle &amp;&#160;</td>
          <td class="paramname"><em>node_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to move the robot to the starting position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node_handle</td><td>Main mechanism to interact with the ROS system. It's used to register the program as a node with the ROS master </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa4a0cddd9a43919327242d28de187fee" name="aa4a0cddd9a43919327242d28de187fee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4a0cddd9a43919327242d28de187fee">&#9670;&#160;</a></span>plan_and_move()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void plan_and_move </td>
          <td>(</td>
          <td class="paramtype">ros::NodeHandle &amp;&#160;</td>
          <td class="paramname"><em>node_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>test</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for dynamic collision avoidance. </p>
<p >The function performs an iterations loop for all the duration of the motion, at each step it calculates a new trajectory (if the previous is in collision) to avoid obstacles </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node_handle</td><td>Main mechanism to interact with the ROS system. It's used to register the program as a node with the ROS master </td></tr>
    <tr><td class="paramname">pos</td><td>Vector containing the goal position for the end effector, specified in terms of x,y,z </td></tr>
    <tr><td class="paramname">motion</td><td>Boolean value to distinguish bewtween different simulation tests </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8197c84abd3032cb00669567be02a797" name="a8197c84abd3032cb00669567be02a797"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8197c84abd3032cb00669567be02a797">&#9670;&#160;</a></span>print_links_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_links_value </td>
          <td>(</td>
          <td class="paramtype">const moveit::core::JointModelGroup *&#160;</td>
          <td class="paramname"><em>joint_model_group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">moveit::core::RobotState &amp;&#160;</td>
          <td class="paramname"><em>robot_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to print the name of the joints with the corrisponing angles. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">joint_model_group</td><td>Is used to keep track of the current robot pose and planning group. </td></tr>
    <tr><td class="paramname">robot_state</td><td>The state of the robot for which the joints values will be printed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa22275fc0348281127e4554cf54b20f8" name="aa22275fc0348281127e4554cf54b20f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa22275fc0348281127e4554cf54b20f8">&#9670;&#160;</a></span>publish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void publish </td>
          <td>(</td>
          <td class="paramtype">ros::NodeHandle&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to publish messages to the specified topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node_handle</td><td>Main mechanism to interact with the ROS system. It's used to register the program as a node with the ROS master </td></tr>
    <tr><td class="paramname">topic</td><td>Name of the topic where the message will be published </td></tr>
    <tr><td class="paramname">num</td><td>Number of the simulation test selected </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a514ffc33d25019bd6ab8433554633074" name="a514ffc33d25019bd6ab8433554633074"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a514ffc33d25019bd6ab8433554633074">&#9670;&#160;</a></span>select_num_configurations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; int &gt; select_num_configurations </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>waypoint_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function used to select the number of configuration. </p>
<p >To select the appropriate number of configuration the function uses the number of waypoints of the trajectory calculated by the planners </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">waypoint_num</td><td>The total number of waypoints (states) the trajectory consists of. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns a vector with two number: the first is the number of configuration selected for the first partial trajectory, the second is the number of configuration to execute at the next iteration step if the trajectory is still collision free. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a9235c4a0ace90c9f9330a17e62ae128c" name="a9235c4a0ace90c9f9330a17e62ae128c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9235c4a0ace90c9f9330a17e62ae128c">&#9670;&#160;</a></span>arm_move_group</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moveit::planning_interface::MoveGroupInterface* arm_move_group</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>pointer to the arm move group </p>

</div>
</div>
<a id="a3be7f66194c2acdc26a14c6210b5ba05" name="a3be7f66194c2acdc26a14c6210b5ba05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3be7f66194c2acdc26a14c6210b5ba05">&#9670;&#160;</a></span>gripper_move_group</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moveit::planning_interface::MoveGroupInterface* gripper_move_group</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>pointer to the gripper move group </p>

</div>
</div>
<a id="ad7bfa43cafe8e167ff7968fab8a6d0fa" name="ad7bfa43cafe8e167ff7968fab8a6d0fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7bfa43cafe8e167ff7968fab8a6d0fa">&#9670;&#160;</a></span>home_pos_x</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double home_pos_x = 0.5</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1f40f8f0cb25be2f889754a10d82ecd1" name="a1f40f8f0cb25be2f889754a10d82ecd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f40f8f0cb25be2f889754a10d82ecd1">&#9670;&#160;</a></span>home_pos_y</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double home_pos_y = 0.3</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa87a83660e85a5e380010d72d4de6aeb" name="aa87a83660e85a5e380010d72d4de6aeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa87a83660e85a5e380010d72d4de6aeb">&#9670;&#160;</a></span>home_pos_z</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double home_pos_z = 0.87</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abf4ee9401c5cf1f6b40d969c983302a6" name="abf4ee9401c5cf1f6b40d969c983302a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf4ee9401c5cf1f6b40d969c983302a6">&#9670;&#160;</a></span>orientation_w</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double orientation_w = 0.0001</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab73db7442fe816acb7163afbffacd796" name="ab73db7442fe816acb7163afbffacd796"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab73db7442fe816acb7163afbffacd796">&#9670;&#160;</a></span>orientation_x</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double orientation_x = 0.0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9d4604a1b64e201f5617d13e90867339" name="a9d4604a1b64e201f5617d13e90867339"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d4604a1b64e201f5617d13e90867339">&#9670;&#160;</a></span>orientation_y</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double orientation_y = 0.0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abad9428aad916c4adb7a5c9dcd0dffc9" name="abad9428aad916c4adb7a5c9dcd0dffc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abad9428aad916c4adb7a5c9dcd0dffc9">&#9670;&#160;</a></span>orientation_z</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double orientation_z = -1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aadb4a5092d2de5ea3a01d642559c512a" name="aadb4a5092d2de5ea3a01d642559c512a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadb4a5092d2de5ea3a01d642559c512a">&#9670;&#160;</a></span>PLANNER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string PLANNER = &quot;RRTstar&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Name of the planner that will be used. </p>

</div>
</div>
<a id="a19cf8ea4075bbdc47c4caef4587cf045" name="a19cf8ea4075bbdc47c4caef4587cf045"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19cf8ea4075bbdc47c4caef4587cf045">&#9670;&#160;</a></span>PLANNING_GROUP_ARM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string PLANNING_GROUP_ARM = &quot;manipulator&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define moveit group name [Arm]. </p>

</div>
</div>
<a id="a40ed76b84f7fb79a07b725b43e0c73f2" name="a40ed76b84f7fb79a07b725b43e0c73f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40ed76b84f7fb79a07b725b43e0c73f2">&#9670;&#160;</a></span>PLANNING_GROUP_GRIPPER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string PLANNING_GROUP_GRIPPER = &quot;endeffector&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define moveit group name [End-Effector]. </p>

</div>
</div>
<a id="ae1498683c0741dd54290a067e3855d16" name="ae1498683c0741dd54290a067e3855d16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1498683c0741dd54290a067e3855d16">&#9670;&#160;</a></span>psm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">planning_scene_monitor::PlanningSceneMonitorPtr psm</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Planning Scene monitor that will create the planning scene. </p>

</div>
</div>
<a id="aaba0b4d344c0f4f1ff9fa2b5ca75e116" name="aaba0b4d344c0f4f1ff9fa2b5ca75e116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaba0b4d344c0f4f1ff9fa2b5ca75e116">&#9670;&#160;</a></span>robot_accellerations</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double robot_accellerations = 0.18</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4a17daac43a74229694494db6c7cae83" name="a4a17daac43a74229694494db6c7cae83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a17daac43a74229694494db6c7cae83">&#9670;&#160;</a></span>robot_model_load</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">robot_model_loader::RobotModelLoader* robot_model_load</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RobotModelLoader: <a href="http://docs.ros.org/noetic/api/moveit_ros_planning/html/classrobot__model__loader_1_1RobotModelLoader.html">http://docs.ros.org/noetic/api/moveit_ros_planning/html/classrobot__model__loader_1_1RobotModelLoader.html</a>. </p>

</div>
</div>
<a id="af30bdcf895e64063b3d6c1bac1141ad7" name="af30bdcf895e64063b3d6c1bac1141ad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af30bdcf895e64063b3d6c1bac1141ad7">&#9670;&#160;</a></span>start_planning_time</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double start_planning_time = 0.15</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa5c64be1d905b455d8330243e5c1804c" name="aa5c64be1d905b455d8330243e5c1804c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5c64be1d905b455d8330243e5c1804c">&#9670;&#160;</a></span>test_num</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int test_num</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a628d801d093e5d9b41ecaa82592ee92d" name="a628d801d093e5d9b41ecaa82592ee92d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a628d801d093e5d9b41ecaa82592ee92d">&#9670;&#160;</a></span>tolerance</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double tolerance = 0.05</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Goal pose tolerance. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
